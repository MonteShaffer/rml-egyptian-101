<!doctype html>
<html lang="en" class="auto-enumerate">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>E-Book (Single File Layout)</title>

  <!-- Vendor CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/datatables.net-bs5@2.1.0/css/dataTables.bootstrap5.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="css/page.css">
</head>

<body>
  <!-- Fixed header -->
  <header class="app-header">
    <div class="d-flex align-items-center gap-3 w-100">
      <div class="fw-semibold">My E-Book</div>
      <div class="muted small">Bootstrap 5 • jQuery • DataTables</div>
      <div class="ms-auto d-flex align-items-center gap-2">
        <input id="searchBox" class="form-control form-control-sm" style="width: 260px;" placeholder="Search (optional)..." />
      </div>
    </div>
  </header>

  <!-- Left global TOC -->
  <nav class="left-toc" aria-label="Table of contents (chapters)">
    <div class="toc-title">Chapters</div>
    <div id="tocLeft" class="d-grid gap-1"></div>
  </nav>

  <!-- Main content -->
<main class="main-content">


    <!-- Chapter 1 -->
    <section class="chapter" id="ch1" data-chapter-title="Chapter 1 — Foundations">
      <h2>Chapter 1 — Foundations</h2>
      <div class="chapter-subtitle">Intro, goals, and the reading experience.</div>

      <!-- Per-chapter RHS TOC: nested INSIDE chapter after subtitle -->
      <aside class="right-toc chapter-toc" data-for-chapter="ch1" aria-label="Local contents for Chapter 1">
        <div class="toc-title">
          <span>In this chapter</span>
          <span class="muted toc-chapter-label">Chapter 1</span>
        </div>

        <!-- Degrades elegantly: plain anchors work without JS -->
        <nav class="d-grid gap-1">
          <a href="#ch1-s1" data-target="ch1-s1">1.1 What this book is</a>
          <a href="#ch1-s2" data-target="ch1-s2">1.2 Tables and DataTables</a>

          <!-- Optional nesting example -->
          <div class="toc-nest">
            <a href="#ch1-s2-a" data-target="ch1-s2-a">1.2.a Initialization</a>
            <a href="#ch1-s2-b" data-target="ch1-s2-b">1.2.b Styling</a>
          </div>
        </nav>
      </aside>

      <section id="ch1-s1" data-title="1.1 What this book is">
        <!-- Optional legacy anchor name for older patterns -->
        <h4>1.1 What this book is</h4>
        <p>Use <code>&lt;section&gt;</code> for chapters and subsections. Keep IDs stable for deep links.</p>

        <div class="takeaway">
          <div class="label">Key takeaway</div>
          <div>Build semantic structure first; add widgets afterwards.</div>
        </div>

        <div class="dialog dialog-human">
          <div class="bubble">Human: Can we make the chapter TOC sticky and scrollable?</div>
        </div>

        <div class="dialog dialog-chatgpt">
          <div class="bubble">ChatGPT 5.2: Yes—use a fixed header, a fixed left nav, and a per-chapter floating TOC.</div>
        </div>
      </section>

      <section id="ch1-s2" data-title="1.2 Tables and DataTables">
        <h4>1.2 Tables and DataTables</h4>

        <section id="ch1-s2-a" data-title="1.2.a Initialization">
          <h5>1.2.a Initialization</h5>
          <p>Example content…</p>
        </section>

        <section id="ch1-s2-b" data-title="1.2.b Styling">
          <h5>1.2.b Styling</h5>
          <p>Example content…</p>
        </section>

        <table id="demoTable" class="table table-sm table-dark table-striped">
          <thead><tr><th>Concept</th><th>Why it matters</th></tr></thead>
          <tbody>
            <tr><td>Chapters</td><td>Global navigation</td></tr>
            <tr><td>Local TOC</td><td>In-chapter navigation</td></tr>
            <tr><td>Widgets</td><td>Readability + reuse</td></tr>
          </tbody>
        </table>
      </section>
    </section>

    <!-- Chapter 2 -->
    <section class="chapter" id="ch2" data-chapter-title="Chapter 2 — Widgets">
      <h2>Chapter 2 — Widgets</h2>
      <div class="chapter-subtitle">Dialogs, callouts, and interactive patterns.</div>

      <aside class="right-toc chapter-toc" data-for-chapter="ch2" aria-label="Local contents for Chapter 2">
        <div class="toc-title">
          <span>In this chapter</span>
          <span class="muted toc-chapter-label">Chapter 2</span>
        </div>

        <nav class="d-grid gap-1">
          <a href="#ch2-s1" data-target="ch2-s1">2.1 Dialog components</a>
          <a href="#ch2-s2" data-target="ch2-s2">2.2 Takeaways and notes</a>
        </nav>
      </aside>

      <section id="ch2-s1" data-title="2.1 Dialog components">
        <a name="ch2-s1"></a>
        <h4>2.1 Dialog components</h4>

        <div class="dialog dialog-human">
          <div class="bubble">Human: Add a copy button near each dialog.</div>
        </div>

        <div class="dialog dialog-chatgpt">
          <div class="bubble">ChatGPT 5.2: Done—JS inserts a button and positions it based on the parent dialog class.</div>
        </div>
      </section>

      <section id="ch2-s2" data-title="2.2 Takeaways and notes">
        <a name="ch2-s2"></a>
        <h4>2.2 Takeaways and notes</h4>
        <p>Example content…</p>
      </section>
    </section>

  </main>

  <!-- Vendor JS -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/datatables.net@2.1.0/js/dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/datatables.net-bs5@2.1.0/js/dataTables.bootstrap5.min.js"></script>

  <!-- Custom JS -->
  <script src="js/page.js"></script>
</body>
</html>
